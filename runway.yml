entrypoint: python runway_model.py
python: 3.6
cuda: 10.1
spec:
  gpu: True
  cpu: False
build_steps:
  # - apt-get update
  # - apt-get install -y libboost-all-dev
  # - apt-get install -y cmake
  # - apt-get install ffmpeg libsm6 libxext6  -y
  - apt-get install zip unzip
  - python -m pip install torch==1.7.0+cu101 -f https://download.pytorch.org/whl/torch_stable.html
  - python -m pip install torchvision==0.8.1+cu101 -f https://download.pytorch.org/whl/torch_stable.html
  - python -m pip install mmcv-full==1.2.0+torch1.7.0+cu101 -f https://download.openmmlab.com/mmcv/dist/index.html
  - pip install runway-python
  - python setup.py develop
  - wget -O assets/checkpoints.zip "https://download.impersonator.org/iper_plus_plus_latest_checkpoints.zip"
  - unzip -o assets/checkpoints.zip -d assets/
  - rm assets/checkpoints.zip